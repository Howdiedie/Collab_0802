
@{
    ViewData["Title"] = "Index";
}

        <div class="Mycontainer  d-flex my-5 ">
            <!--------計劃概述------>
            <div class=" col-5 me-5 ">
                <form asp-action="UpdateProgramOverview" id="formProjectTextarea" method="post">
                    <div class="d-flex ">
                        <p class="MyTitle fs-3 ms-3">計劃概述</p>
                        <!-- <button id="btnEditTextarea" class="btn-start mb-2 margin-editbtn">編輯</button> -->
                    <button type="button" id="btnEditTextarea" class="icon-addTarget margin-editbtn  addIcon border-0 bg-white">
                        <i id="iconeditTextarea" class="fa-regular fa-pen-to-square fa-xl"></i>
                    </button>
                    <button type="submit" id="btnSaveTextarea" class="icon-addTarget addIcon border-0 bg-white">
                        <i id="iconSaveTextarea" class="fa-regular fa-floppy-disk fa-xl" style="display: none;"></i>
                    </button>
                    </div>
                    <div class="headerBody  pt-3 pb-4 ">
                <textarea id="ProjectTextarea" class="pe-4 lh-lg " name="newOverview" cols="50" rows="17"
                                  readonly></textarea>
                    </div>
                </form>
            </div>
            <!--------計劃概述END------>
            <!-- 參與成員+資料連結 -->
            <div class="col-6 ms-3 ">

                <!--------參與成員------>
                <div class="">
                    <div class="d-flex ms-3">
                        <p class="MyTitle fs-3 ">參與成員</p>
                        <!-- <button class="btn-start mb-2 margin-delete">刪除</button> -->
                        <a id="" class="icon-addTarget margin-delete">
                            <i class="fa-sharp fa-solid fa-user-xmark fa-xl"></i>
                        </a>
                    </div>
                    <div class=" headerBody pt-2 pb-4 d-flex flex-wrap ms-3">
                        <div class=" me-5 mt-3 text-center ">
                            <a class="Myavatar AddNewBtn">
                                <i class="fa-solid fa-plus fa-xl"></i>
                            </a>
                            <p class="mt-3 fs-5">新增成員</p>
                        </div>
                        <!-- 一個人 -->
                        <div class="me-5 mt-3 text-center ">
                            <div class="Myavatar">
                                <img src="~/img/MemberImg/0733ba760b29378474dea0fdbcb97107.jpg" alt="" class="">
                            </div>
                            <p class="mt-3 fs-5 ">Partrick</p>
                        </div>
                        <!-- 一個人 -->
                        <div class="me-5 mt-3  text-center ">
                            <div class="Myavatar">
                        <img src="~/img/MemberImg/33fd1f2798aba71937fc6318bc7f8a14.jpg" alt="" class="">
                            </div>
                            <p class="mt-3 fs-5">Tina</p>
                        </div>
                        <!-- 一個人 -->
                        <div class="me-5 mt-3  text-center ">
                            <div class="Myavatar">
                        <img src="~/img/MemberImg/3ace294c8314e041e7c52ec31d9355d4.jpg" alt="" class="">
                            </div>
                            <p class="mt-3 fs-5">Jessica</p>
                        </div>
                        <!-- 一個人 -->
                        <div class="me-5 mt-3  text-center ">
                            <div class="Myavatar">
                        <img src="~/img/MemberImg/9121f2b3c557192b6fcd234782a7c399.jpg" alt="" class="">
                            </div>
                            <p class="mt-3 fs-5">Jeff</p>
                        </div>
                        <!-- 一個人 -->
                        <div class="me-5 mt-3  text-center ">
                            <div class="Myavatar">
                        <img src="~/img/MemberImg/b85e9df9e9b75bcce3a767eb894ef153.jpg" alt="" class="">
                            </div>
                            <p class="mt-3 fs-5">John</p>
                        </div>
                        <!-- 一個人 -->
                        <div class="me-5 mt-3  text-center ">
                            <div class="Myavatar">
                        <img src="~/img/MemberImg/97e11a32ea41760dbb080ed692018b0c.jpg" alt="" class="">
                            </div>
                            <p class="mt-3 fs-5">Hana</p>
                        </div>
                    </div>
                </div>

                <!--------參與成員END------>
                <!--------資料連結------>
                <div class="mt-5 mb-5">
                    <div class="d-flex ms-3">
                        <p class="MyTitle fs-3">資料連結</p>
                        <!-- <button class="btn-start mb-2  margin-delete">新增</button> -->
                        <a id="btnAddLink" class="icon-addTarget margin-btnAddLink">
                            <i class="fa-regular fa-square-plus fa-xl"></i>
                        </a>
                    </div>
                    <div class="headerBody pb-4 ">
                        <div id="divAddLink" class="m-3" style="display: none;">
                            <form asp-action="AddLink" method="post" id="formAddLink">
                                <input class="addInput me-3" type="text" placeholder="名稱" name="LinkTitle" onfocus="this.placeholder = ''" onblur="this.placeholder = '名稱'">
                                <input class="addInput" type="text" placeholder="URL" name="LinkUrl" onfocus="this.placeholder = ''" onblur="this.placeholder = 'URL'">
                                <a id="btnSaveLink" class="icon-addTarget margin-btnSaveLink " href="#">
                                    <i class="fa-regular fa-floppy-disk fa-xl"></i>
                                </a>
                            </form>
                        </div>
                        <!-- linkList -->
                        <div class=" me-2 mb-3 pe-2">
                            <div class="scrollable-div mb-4 mt-3">
                                <!-- linkRow -->
                                @foreach (var link in ViewBag.Links) {
                                    <div class="linkList mt-4 me-5">
                                        <a class="linkRow me-3" href="@link.LinkUrl">@link.LinkTitle</a>
                                        <div class="linkDelete ">
                                            <form asp-action="DeleteLink" asp-route-linkId="@link.LinkId" method="post">
                                        <button type="submit" class="icon-addTarget me-4 ms-5 addIcon border-0" style="background-color: transparent;">
                                                    <i class="fa-solid fa-trash fa-lg"></i>
                                                </button>
                                            </form>
                                        </div>
                                    </div>
                                }
                                <!-- linkRow END -->
                            </div>
                        </div>
                        <!-- linkList END -->
                    </div>
                </div>
            </div>
            <!--------資料連結END------>
        </div>

<link rel="stylesheet" href="~/css/ProjectGeneral.css" />
<script>
    // alert視窗
    function htmlDecode(input) {
        var doc = new DOMParser().parseFromString(input, "text/html");
        return doc.documentElement.textContent;
    }
    var message = '@Html.Raw(TempData["Message"])';
    if (message) {
        alert(htmlDecode(message));
    }


    $(document).ready(function () {
        $("#btnEditTextarea").click(function () {
            $("#iconeditTextarea").hide();
            $("#iconSaveTextarea").show();

            // 切換為編輯模式
            var textarea = $("#ProjectTextarea");
            textarea.prop("readonly", false);
            $("#ProjectTextarea").addClass("edit-textarea");
        });

        $("#btnSaveTextarea").click(function () {

            // 按鈕控制
            $("#iconSaveTextarea").hide();
            $("#iconeditTextarea").show();

            // 切換為只讀模式
            var textarea = $("#ProjectTextarea");
            textarea.prop("readonly", true);
            $("#ProjectTextarea").removeClass("edit-textarea");
            
        });


        var text = `@Html.Raw(ViewBag.ProgramOverview)`;
        $("#ProjectTextarea").val(text);



        $("#btnAddLink").click(function () {
            $(this).hide();
            $("#divAddLink").show();
        });

        $("#btnSaveLink").click(function () {

            $("#formAddLink").submit();
            $("#divAddLink").hide();
            $("#btnAddLink").show();
        });


    });



</script>